<div class="d-flex justify-content-between align-items-center mb-4">
  <h1 class="mb-0">üèüÔ∏è {{.Title}}</h1>
  <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addZoneModal" title="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–æ–Ω—É">
    ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–æ–Ω—É
  </button>
</div>

<div class="row">
  {{range .Zones}}
  <div class="col-md-6 col-lg-4 mb-4">
    <div class="card zone-card h-100">
      <div class="card-header"><h5 class="card-title mb-0">{{.Name}}</h5></div>
      <div class="card-body">
        <div class="text-center mb-3">
          {{if .HasPhoto}}
            <img src="/zones/{{.ID}}/photo" class="photo-preview img-thumbnail" alt="–§–æ—Ç–æ {{.Name}}" loading="lazy" title="–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞">
          {{else}}
            <div class="no-photo-placeholder d-flex align-items-center justify-content-center" title="–§–æ—Ç–æ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ">
              <span class="text-muted">üì∑ –ù–µ—Ç —Ñ–æ—Ç–æ</span>
            </div>
          {{end}}
        </div>

        <p class="card-text mb-2">{{.Description}}</p>
        <ul class="list-group list-group-flush">
          <li class="list-group-item d-flex justify-content-between">
            <span>–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:</span> <span class="badge bg-primary">{{.Capacity}} —á–µ–ª.</span>
          </li>
          <li class="list-group-item d-flex justify-content-between">
            <span>–°—Ç–∞—Ç—É—Å:</span>
            <span class="badge
              {{- if eq .Status "–î–æ—Å—Ç—É–ø–Ω–∞" -}} bg-success
              {{- else if eq .Status "–ù–∞ —Ä–µ–º–æ–Ω—Ç–µ" -}} bg-warning
              {{- else if eq .Status "–ó–∞–∫—Ä—ã—Ç–∞" -}} bg-secondary
              {{- else -}} bg-danger {{- end -}}">
              {{.Status}}
            </span>
          </li>
        </ul>
      </div>
      <div class="card-footer">
        <div class="btn-group w-100">
          <button class="btn btn-outline-success btn-sm"
                  data-bs-toggle="modal"
                  data-bs-target="#uploadPhotoModal"
                  data-zone-id="{{.ID}}"
                  data-zone-name="{{.Name}}"
                  title="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –¥–ª—è —ç—Ç–æ–π –∑–æ–Ω—ã">üì∑ –§–æ—Ç–æ</button>

          <button class="btn btn-outline-primary btn-sm edit-zone-btn"
                  data-zone-id="{{.ID}}"
                  title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–æ–Ω–µ">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</button>

          <button class="btn btn-outline-danger btn-sm delete-zone-btn"
                  data-zone-id="{{.ID}}"
                  data-zone-name="{{.Name}}"
                  title="–£–¥–∞–ª–∏—Ç—å –∑–æ–Ω—É">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </div>
      </div>
    </div>
  </div>
  {{else}}
  <div class="col-12">
    <div class="alert alert-info text-center">
      <h5 class="mb-1">üèüÔ∏è –ó–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h5>
      <p class="mb-0">–ù–∞–∂–º–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å –∑–æ–Ω—É¬ª, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é</p>
    </div>
  </div>
  {{end}}
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞: –¥–æ–±–∞–≤–∏—Ç—å –∑–æ–Ω—É -->
<div class="modal fade" id="addZoneModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content">
    <div class="modal-header"><h5 class="modal-title">–î–æ–±–∞–≤–∏—Ç—å –∑–æ–Ω—É</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
    <form id="addZoneForm">
      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã *</label>
          <input type="text" class="form-control" name="name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–∞—Ä–¥–∏–æ-–∑–æ–Ω–∞"/>
        </div>
        <div class="mb-3">
          <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
          <textarea class="form-control" name="description" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–æ–Ω—ã –∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è..."></textarea>
        </div>
        <div class="row">
          <div class="col-md-6"><div class="mb-3"><label class="form-label">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å *</label><input type="number" class="form-control" name="capacity" min="1" max="100" value="10" required/></div></div>
          <div class="col-md-6">
            <div class="mb-3"><label class="form-label">–°—Ç–∞—Ç—É—Å *</label>
              <select class="form-select" name="status" required>
                <option value="–î–æ—Å—Ç—É–ø–Ω–∞" selected>–î–æ—Å—Ç—É–ø–Ω–∞</option>
                <option value="–ù–∞ —Ä–µ–º–æ–Ω—Ç–µ">–ù–∞ —Ä–µ–º–æ–Ω—Ç–µ</option>
                <option value="–ó–∞–∫—Ä—ã—Ç–∞">–ó–∞–∫—Ä—ã—Ç–∞</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button><button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button></div>
    </form>
  </div></div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ -->
<div class="modal fade" id="uploadPhotoModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content">
    <div class="modal-header"><h5 class="modal-title">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –∑–æ–Ω—ã</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
    <form id="uploadPhotoForm" enctype="multipart/form-data">
      <div class="modal-body">
        <input type="hidden" id="uploadZoneId" name="zone_id"/>
        <div class="mb-3">
          <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ç–æ</label>
          <input type="file" class="form-control" name="photo" accept="image/jpeg,image/png,image/webp" required/>
          <div class="form-text">–†–∞–∑—Ä–µ—à–µ–Ω—ã: JPEG, PNG, WebP. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5 MB</div>
        </div>
        <div class="mb-3">
          <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä:</label>
          <div id="photoPreview" class="text-center mt-2">
            <img id="previewImage" class="img-thumbnail d-none" style="max-height: 200px;">
            <div id="noPreview" class="text-muted">üì∑ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–∞</div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" id="clearPhotoBtn" title="–£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ –∑–æ–Ω—ã">üßπ –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ç–æ</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn btn-success">üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
      </div>
    </form>
  </div></div>
</div>

<!-- –ú–æ–¥–∞–ª–∫–∞: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
<div class="modal fade" id="editZoneModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog"><div class="modal-content">
    <div class="modal-header"><h5 class="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–æ–Ω—É</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div>
    <form id="editZoneForm">
      <div class="modal-body">
        <input type="hidden" id="editZoneId" name="id"/>
        <div class="mb-3"><label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–æ–Ω—ã *</label><input type="text" class="form-control" name="name" id="editName" required/></div>
        <div class="mb-3"><label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label><textarea class="form-control" name="description" id="editDescription" rows="3"></textarea></div>
        <div class="row">
          <div class="col-md-6"><div class="mb-3"><label class="form-label">–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å *</label><input type="number" class="form-control" name="capacity" id="editCapacity" min="1" max="100" required/></div></div>
          <div class="col-md-6">
            <div class="mb-3"><label class="form-label">–°—Ç–∞—Ç—É—Å *</label>
              <select class="form-select" name="status" id="editStatus" required>
                <option value="–î–æ—Å—Ç—É–ø–Ω–∞">–î–æ—Å—Ç—É–ø–Ω–∞</option>
                <option value="–ù–∞ —Ä–µ–º–æ–Ω—Ç–µ">–ù–∞ —Ä–µ–º–æ–Ω—Ç–µ</option>
                <option value="–ó–∞–∫—Ä—ã—Ç–∞">–ó–∞–∫—Ä—ã—Ç–∞</option>
              </select>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">–û—Ç–º–µ–Ω–∞</button><button type="submit" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button></div>
    </form>
  </div></div>
</div>
